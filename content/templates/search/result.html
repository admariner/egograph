{% extends "base.html" %}
{% load static %}


{% block page_title %}{{input_value}} - EgoGraph{% endblock %}


{% block content %}

	{# Suggestions #}
	<div class="mb-4">
		<div class="h4 mb-0">Top Suggestions</div>
		{##}
		<div class="row gx-3 gx-sm-4 overflow-hidden text-nowrap">
			{# Google #}
			<div class="col">
				<div class="my-3">Google autocomplete</div>
				<div class="row g-1 g-sm-2 g-md-3">
					<div class="col">
						<ol class="list-group">
							{% for suggestion in suggestions.google|slice:":5" %}
								<a href="{% url 'search:result' suggestion %}" class="list-group-item list-group-item-action">
									{{forloop.counter}}. {{suggestion}}
								</a>
							{% endfor%}
						</ol>
					</div>
					<div class="col">
						<ol class="list-group">
							{% for suggestion in suggestions.google|slice:"5:" %}
								<a href="{% url 'search:result' suggestion %}" class="list-group-item list-group-item-action">
									{{forloop.counter|add:"5"}}. {{suggestion}}
								</a>
							{% endfor%}
						</ol>
					</div>
				</div>
			</div>
			{# Communicability #}
			<div class="col">
				<div class="my-3">
					Communicability <i class="fe fe-info text-muted ml-1" data-bs-toggle="tooltip" title="Ranked by the fraction of nodes each is connected to"></i>
				</div>
				<div class="row g-1 g-sm-2 g-md-3">
					<div class="col">
						<ol class="list-group">
							{% for suggestion in suggestions.communicability|slice:":5" %}
								<a href="{% url 'search:result' suggestion %}" class="list-group-item list-group-item-action">
									{{forloop.counter}}. {{suggestion}}
								</a>
							{% endfor%}
						</ol>
					</div>
					<div class="col">
						<ol class="list-group">
							{% for suggestion in suggestions.communicability|slice:"5:" %}
								<a href="{% url 'search:result' suggestion %}" class="list-group-item list-group-item-action">
									{{forloop.counter|add:"5"}}. {{suggestion}}
								</a>
							{% endfor%}
						</ol>
					</div>
				</div>
			</div>
		</div>
	</div>

	{# Stats #}
	<div class="mb-4">
		<div class="h4 mb-3">Network Stats</div>
		{##}
		<div class="row gx-3 gx-sm-4">
			{##}
			<div class="col">
				<ul class="list-group">
					<li class="list-group-item d-flex justify-content-between align-items-center">
						Nodes <span>{{stats.nodes}}</span>
					</li>
				</ul>
			</div>
			{##}
			<div class="col">
				<ul class="list-group">
					<li class="list-group-item d-flex justify-content-between align-items-center">
						Edges <span>{{stats.edges}}</span>
					</li>
				</ul>
			</div>
		</div>
	</div>

	{# Graph #}
	<div class="mb-4">
		<div class="h4 mb-3">Network Graph</div>
		<div id="graph" class="w-100 border mb-3"></div>
	</div>

{% endblock %}


{% block js %}

	{# Pass context data to javascript #}
	{{ graph_data|json_script:"graph_data" }}

	{# Vis.js #}
	<script src="https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js"></script>

	{# Chart data #}
	<script src="{% static 'js/graph.js' %}"></script>

{% endblock %}